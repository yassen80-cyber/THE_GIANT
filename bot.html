<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>THE GIANT - Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

<style>
/* Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª ÙƒÙ…Ø§ Ù‡ÙŠ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ù…Ø¸Ù‡Ø± Ø§Ù„Ø±Ø§Ø¦Ø¹ */
body{ margin:0; font-family:'Cairo',sans-serif; background:linear-gradient(135deg,#0b0f19,#0f172a); color:#fff; display:flex; justify-content:center; align-items:center; min-height:100vh; }
#chat-interface{ width:95%; max-width:600px; height:92vh; background:#111827; border-radius:22px; border:2px solid #00b2ff; display:flex; flex-direction:column; overflow:hidden; box-shadow:0 20px 40px rgba(0,0,0,.6); position: relative; }
#chat-header{ background:linear-gradient(90deg,#00b2ff,#008bcc); padding:15px; text-align:center; font-size:1.2rem; font-weight:700; display:flex; justify-content:space-between; align-items:center; }
.header-btns { display: flex; gap: 8px; }
#back-btn, #clear-btn{ background:rgba(255,255,255,.15); border:none; color:#fff; padding:6px 12px; border-radius:15px; cursor:pointer; font-size:.8rem; transition:.3s; }
#chat-messages{ flex:1; padding:15px; overflow-y:auto; display:flex; flex-direction:column; gap:14px; }
.message{ max-width:88%; padding:12px 16px; border-radius:18px; line-height:1.6; animation:fadeUp .3s ease; word-wrap: break-word; white-space: pre-wrap; }
@keyframes fadeUp{ from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }
.user-message{ background:#00b2ff; align-self:flex-end; border-bottom-left-radius:4px; }
.bot-message{ background:#1e293b; align-self:flex-start; border-bottom-right-radius:4px; border-right:4px solid #7ee8fa; }
.typing-indicator { font-size: 0.8rem; color: #7ee8fa; align-self: flex-start; padding: 10px; font-style: italic; display: none; }
#input-area{ display:flex; padding:12px; border-top:1px solid #1e293b; background:#0f172a; gap:8px; }
#chat-input{ flex:1; background:#020617; border:1px solid #1e293b; color:#fff; padding:10px; border-radius:10px; outline: none; }
#send, #voice-btn{ background:#00b2ff; border:none; color:#fff; padding:10px 15px; border-radius:10px; cursor:pointer; font-weight:700; }
#voice-btn.active { background: #ef4444; animation: pulse 1.5s infinite; }
@keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
</style>
</head>
<body>

<div id="chat-interface">
  <div id="chat-header">
    <span>ğŸ¤– Ø°ÙƒØ§Ø¡ Ø§Ù„Ø¹Ù€Ù…Ù„Ø§Ù‚ Ø§Ù„Ø´Ø§Ù…Ù„</span>
    <div class="header-btns">
        <button id="clear-btn">Ù…Ø³Ø­</button>
        <button id="back-btn" onclick="history.back()">Ø±Ø¬ÙˆØ¹</button>
    </div>
  </div>
  <div id="chat-messages"></div>
  <div id="typing" class="typing-indicator">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙÙƒÙŠØ±...</div>
  <div id="input-area">
    <button id="voice-btn">ğŸ¤</button>
    <input id="chat-input" placeholder="Ø§Ø³Ø£Ù„ Ø£ÙŠ Ø³Ø¤Ø§Ù„...">
    <button id="send">Ø¥Ø±Ø³Ø§Ù„</button>
  </div>
</div>

<script type="module">
// ØªÙ… ÙˆØ¶Ø¹ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ù‡Ù†Ø§
const API_KEY = "AIzaSyALQKEsqFU98zu3BbN0U6vg72GrgMGOQ8k"; 
const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`;

const chatMessages = document.getElementById("chat-messages");
const chatInput = document.getElementById("chat-input");
const sendBtn = document.getElementById("send");
const typingIndicator = document.getElementById("typing");
const clearBtn = document.getElementById("clear-btn");
const voiceBtn = document.getElementById("voice-btn");

function addMessage(text, type) {
  const div = document.createElement("div");
  div.className = `message ${type}-message`;
  div.innerText = text;
  chatMessages.appendChild(div);
  chatMessages.scrollIntoView({ behavior: 'smooth', block: 'end' });
}

async function askAI(prompt) {
  typingIndicator.style.display = "block";
  try {
    const response = await fetch(API_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        contents: [{ parts: [{ text: `Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ ØªØ¹Ù„ÙŠÙ…ÙŠ Ù„Ù…Ù†ØµØ© THE GIANT. Ø£Ø¬Ø¨ Ø¨Ø°ÙƒØ§Ø¡ ÙˆØ§Ø®ØªØµØ§Ø± Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ: ${prompt}` }] }]
      })
    });

    const data = await response.json();
    if (data.error) throw new Error(data.error.message);

    const aiResponse = data.candidates[0].content.parts[0].text;
    typingIndicator.style.display = "none";
    addMessage(aiResponse, "bot");
  } catch (error) {
    typingIndicator.style.display = "none";
    addMessage("Ø­ØµÙ„Øª Ù…Ø´ÙƒÙ„Ø© Ø¨Ø³ÙŠØ·Ø©ØŒ Ø¬Ø±Ø¨ ØªØ³Ø£Ù„ ØªØ§Ù†ÙŠ Ø£Ùˆ Ø§ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù†Øª Ø¹Ù†Ø¯Ùƒ.", "bot");
  }
}

function processInput() {
  const text = chatInput.value.trim();
  if (!text) return;
  addMessage(text, "user");
  askAI(text);
  chatInput.value = "";
}

sendBtn.onclick = processInput;
chatInput.onkeypress = (e) => { if(e.key === 'Enter') processInput(); };
clearBtn.onclick = () => { chatMessages.innerHTML = ""; addMessage("ØªÙ… Ø§Ù„Ù…Ø³Ø­! Ø£Ù†Ø§ Ø¬Ø§Ù‡Ø² Ù„Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯.", "bot"); };

// Ù…ÙŠØ²Ø© Ø§Ù„ØµÙˆØª
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
if (SpeechRecognition) {
    const recognition = new SpeechRecognition();
    recognition.lang = 'ar-EG';
    voiceBtn.onclick = () => { recognition.start(); voiceBtn.classList.add('active'); };
    recognition.onresult = (event) => {
        chatInput.value = event.results[0][0].transcript;
        voiceBtn.classList.remove('active');
        processInput();
    };
    recognition.onend = () => voiceBtn.classList.remove('active');
}

addMessage("Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ! Ø£Ù†Ø§ Ø°ÙƒØ§Ø¡ Ø§Ù„Ø¹Ù€Ù…Ù„Ø§Ù‚ØŒ ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ", "bot");
</script>
</body>
</html>
